<div class="col-12">
  <div class="modal_form">
    <div class="modal__content">
      <label for="click" style="float:right">
        <a class="close-x quit" (click)="closex()">X</a>
      </label>
  <h4>Specify Exam Code Range for Individual Departments</h4>
  <form (ngSubmit)="updateRange()" [formGroup]="myform" novalidate>
   
      <label for="dept">Department</label>&nbsp;
      <select class="form-control" name="dept" id="dept" [(ngModel)]="department.dept_code" formControlName="department">
        <option *ngFor="let d of departments" value={{d.dept_code}}>{{d.dept_code}}</option>
      </select>
      <p class="small" *ngIf="isValid('department')">Subjecet Code is Mandatory</p>

      <label for="startRange">Start range</label>
      <input type="number" class="form-control" name="startRange" id="startRange" [(ngModel)]="department.start" formControlName="startRange">
      <p class="small" *ngIf="isValid('startRange')">Required</p>

      <label for="endRange">End range</label>
      <input type="number" class="form-control" name="endRange" id="endRange" [(ngModel)]="department.end" formControlName="endRange">
      <p class="small" *ngIf="isValid('endRange')">Required</p>
      <br>

      <button type="submit" class="btn btn-dark form-control" [disabled]="myform.invalid">Allot</button>

  </form>
  </div>
  </div>
  <div class="overlay"></div>
  <h4>Exam Codes</h4>
  <hr>
  <div class="row">
    <div class="col-5">
        <div class="form-group">
            <div class="input-group">
              <div class="input-group-addon">
                <i class="fas fa-search"></i>
              </div>
              <input type="text" id="search" class="form-control" name="searchString" placeholder="Type Exam Code..." [(ngModel)]="searchString">
            </div>
        </div>
      </div>
      <div class="col-2 nopadding">
        <input type="checkbox" id="click" style="display:none;" />
        <label class="button-dark" for="click">
          <a id="add" class="btn btn-dark text-white" (click)="openAddWindow()">Specify Range</a>
        </label>
      </div>
</div>
<div>
<table class="table table-striped table-bordered table-sm" id="example">
  <thead class="table-dark">
    <tr>
      <th>#</th>
      <th>Exam Code</th>
      <th>Department</th>
      <th>Subjects</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let ec of examCodes | filter : 'examCode' : searchString | paginate: { itemsPerPage: 10, currentPage: p}; let idx = index">
      <th scope="row">{{idx+1}}</th>
      <td>{{ec.examCode}}</td>
      <td>{{ec.dept}}</td>
      <td ><span *ngFor="let ms of mappedSubjects[ec.examCode]; let last = last">{{ms.scode}}
        <span *ngIf="!last">/</span>
      </span></td>
    </tr>
  </tbody>
</table>
<pagination-controls (pageChange)="p = $event"></pagination-controls>
</div>